
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="A set of demos and guided-exercises about Microprofile with Helidon" name="description"/>
<meta content="Karina Varela and Ot√°vio Santana" name="author"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.3.1, mkdocs-material-8.3.8" name="generator"/>
<title>Contexts and Dependency Injection (CDI) - Learning Microprofile</title>
<link href="../../assets/stylesheets/main.1d29e8d0.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.cbb835fc.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="light-blue" data-md-color-primary="blue" data-md-color-scheme="slate" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#contexts-and-dependency-injection-cdi">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Learning Microprofile" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Learning Microprofile">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Learning Microprofile
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Contexts and Dependency Injection (CDI)
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="default" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/architects4j/helidon-microstream-training-labs" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 480 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
      Practicing MicroProfile with Helidon
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../00_environment/">
        Guided exercises
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../more/training/">
        More
      </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Learning Microprofile" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Learning Microprofile">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Learning Microprofile
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/architects4j/helidon-microstream-training-labs" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 480 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
        Practicing MicroProfile with Helidon
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
          Guided exercises
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Guided exercises" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Guided exercises
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../00_environment/">
        Environment
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../01_helidon_getting_started/">
        Getting started with Helidon
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Contexts and Dependency Injection (CDI)
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Contexts and Dependency Injection (CDI)
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduction">
    Introduction
  </a>
<nav aria-label="Introduction" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-you-will-learn">
    What you will learn
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cdi-overview">
    CDI overview
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pre-requisites">
    Pre requisites
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hands-on-practice">
    Hands-on practice
  </a>
<nav aria-label="Hands-on practice" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#first-steps">
    First steps
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#contexts-and-objects-behaviors">
    Contexts and objects behaviors
  </a>
<nav aria-label="Contexts and objects behaviors" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#instantiating-an-secontainer">
    Instantiating an SeContainer
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#obtaining-existing-object-instances-in-the-secontainer">
    Obtaining existing object instances in the SeContainer
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#testing-your-code">
    Testing your code:
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#producers-and-consumers">
    Producers and Consumers
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../03_rest_client_lab/">
        Creating a client service with MicroProfile RestClient
      </a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" id="__nav_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5">
          Challenges
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Challenges" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
          Challenges
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../challenges/04_challenge_rest/">
        Golden service apis for ACME Store
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../challenges/05_challenge_nosql/">
        NoSQL persistence on Java services
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
          More
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="More" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          More
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../more/training/">
        Training
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../more/architects4j/">
        Architects4J
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduction">
    Introduction
  </a>
<nav aria-label="Introduction" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-you-will-learn">
    What you will learn
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cdi-overview">
    CDI overview
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pre-requisites">
    Pre requisites
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hands-on-practice">
    Hands-on practice
  </a>
<nav aria-label="Hands-on practice" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#first-steps">
    First steps
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#contexts-and-objects-behaviors">
    Contexts and objects behaviors
  </a>
<nav aria-label="Contexts and objects behaviors" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#instantiating-an-secontainer">
    Instantiating an SeContainer
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#obtaining-existing-object-instances-in-the-secontainer">
    Obtaining existing object instances in the SeContainer
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#testing-your-code">
    Testing your code:
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#producers-and-consumers">
    Producers and Consumers
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="contexts-and-dependency-injection-cdi"><span class="enumerate-headings-plugin enumerate-heading-plugin">3.</span> Contexts and Dependency Injection (CDI)</h1>
<h2 id="introduction"><span class="enumerate-headings-plugin enumerate-heading-plugin">3.1</span> Introduction</h2>
<h3 id="what-you-will-learn"><span class="enumerate-headings-plugin enumerate-heading-plugin">3.1.1</span> What you will learn</h3>
<p>Here are the main goals you will achieve with this hands-on execise:</p>
<ul>
<li>Learn how to use the reference implementation of the CDI specification, <a href="https://weld.cdi-spec.org/">Weld</a>.</li>
<li>Learn how to get access to the current container in Java SE applications using an important class in the CDI world, <code>javax.enterprise.inject.se.SeContainer</code>.</li>
<li>Try out different scopes and test the injection of different objects and their behavior;</li>
<li>Practice the concept of observers and event listeners;</li>
</ul>
<h3 id="cdi-overview"><span class="enumerate-headings-plugin enumerate-heading-plugin">3.1.2</span> CDI overview</h3>
<p><a href="http://cdi-spec.org/">Contexts and Depedendency Injection (CDI)</a> is an specification included in Java since version 6. It brings loose coupling between components of the application and makes it easy for developers to manage stateful object instances and connect together different layers of the application. </p>
<p>When getting started with CDI, there are key concepts developers be aware of: </p>
<ul>
<li>Beans</li>
<li>Dependency Injection</li>
<li>Qualifiers</li>
<li>Scopes</li>
<li>Interceptors </li>
<li>Events. </li>
</ul>
<details class="info more about cdi" open="open">
<summary>Info</summary>
<p>For detailed explanation and examples refer to the <a href="https://docs.jboss.org/cdi/learn/userguide/CDI-user-guide.html">CDI's user guides</a>.</p>
</details>
<p>The fundamental concept to learn is the <strong>managed bean</strong>. According the the <a href="https://docs.jboss.org/cdi/learn/userguide/CDI-user-guide.html#_what_is_a_bean">CDIn's user guides</a>:</p>
<div class="admonition quote">
<p><em>"(...) Managed Beans are defined as container-managed objects with minimal programming restrictions, otherwise known by the acronym POJO (Plain Old Java Object). They support a small set of basic services, such as resource injection, lifecycle callbacks and interceptors. (...)"</em>.</p>
</div>
<p>With CDI developers have the possibility to manage stateful components' lifecycle. There are in total five different <strong>scopes</strong> that can be used, being <code>@Dependent</code>, <code>@Conversation</code>, <code>@RequestScoped</code> and <code>@ApplicationScoped</code>. See below explanation for the default option, and other two commonly used options:</p>
<dl>
<dt><strong>The Default Scope</strong></dt>
<dd>
<p>This is the default scope for managed beans in case none is configured. Managed Beans with default scope last the same time as its client bean.</p>
</dd>
<dt><strong>The request scope</strong></dt>
<dd>
<p>Managed beans configured with <code>@RequestScoped</code> will last for an HTTP request lifespan, say, in a web application. </p>
</dd>
<dt><strong>The application scope</strong>:</dt>
<dd>
<p>Managed beans configured with <code>@ApplicationScoped</code> will exist throughout all interactions done with an application, including different users' interaction and requests. </p>
</dd>
</dl>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For more information about application scopes, please refer to Weld - reference implementation of CDI - User Guide: <a href="https://docs.jboss.org/weld/reference/3.0.0.Final/en-US/html_single/#scopescontexts">Weld: Scopes and Contexts</a> and the <a href="https://jakarta.ee/specifications/cdi/3.0/jakarta-cdi-spec-3.0.html#contexts">Jakarta EE CDI 3.0 Specification Document</a>. </p>
</div>
<hr/>
<h2 id="pre-requisites"><span class="enumerate-headings-plugin enumerate-heading-plugin">3.2</span> Pre requisites</h2>
<p>To be able to go through this guided exercise, you will need to have the following components in your dev environment:</p>
<ul>
<li>Have finished the steps described in <a href="../00_environment/">Preparing your environment</a></li>
</ul>
<h2 id="hands-on-practice"><span class="enumerate-headings-plugin enumerate-heading-plugin">3.3</span> Hands-on practice</h2>
<p>Let's get started with the exercise with a series of steps that will guide you through completing the implementation of a project.</p>
<h3 id="first-steps"><span class="enumerate-headings-plugin enumerate-heading-plugin">3.3.1</span> First steps</h3>
<ol>
<li>
<p>Inside the cloned repository <a href="helidon-microstream-training-labs-foundation">helidon-microstream-training-labs-foundation</a>, you'll find the project <code>cdi-lab</code>. Open the project <code>cdi-lab</code> in your IDE of choice. </p>
</li>
<li>
<p>Open the <code>pom.xml</code> file. In the <code>&lt;dependencies&gt;</code> section, line 21, add the dependency to Weld. Weld is reference implementation of the CDI specification.
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="nt">&lt;dependency&gt;</span>
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>    <span class="nt">&lt;groupId&gt;</span>org.jboss.weld.se<span class="nt">&lt;/groupId&gt;</span>
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>    <span class="nt">&lt;artifactId&gt;</span>weld-se-shaded<span class="nt">&lt;/artifactId&gt;</span>
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>    <span class="nt">&lt;version&gt;</span>${weld.se.core.version}<span class="nt">&lt;/version&gt;</span>
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></p>
</li>
<li>
<p>Notice the version is already configured in <code>pom.xml</code>, in the property <code>weld.se.core.version</code>.</p>
</li>
<li>
<p>Build and install the application using maven command line or your IDE:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>mvn clean install
</code></pre></div></p>
</li>
</ol>
<p>Your project isn't going to compile yet, due to other unfinished code. Let's move on to the next step.</p>
<h3 id="contexts-and-objects-behaviors"><span class="enumerate-headings-plugin enumerate-heading-plugin">3.3.2</span> Contexts and objects behaviors</h3>
<p>Now, let's start practicing with the Vehicle example demonstrated by the instructor. You will finish the project implementation, run it and analise it yourself.</p>
<ol>
<li>Using your IDE of choice, open the Class <code>App1.java</code>. In the next steps, we'll update this class where: a new container should be created, and we will use it to inject an instance of an object that inherits the Interface <code>Vehicle</code> and an instance of an object based on the class <code>Car</code>.</li>
</ol>
<h4 id="instantiating-an-secontainer"><span class="enumerate-headings-plugin enumerate-heading-plugin">3.3.2.1</span> Instantiating an SeContainer</h4>
<ol>
<li>
<p>Locate in the <code>App1.java</code> the line 15. 
     <div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">SeContainer</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div></p>
</li>
<li>
<p>This code is incorrect, since container should not be initializated with null. To fix this code, replace the "null" initialization with an intialization done with the class <a href="https://docs.jboss.org/cdi/api/2.0.EDR2/javax/enterprise/inject/se/SeContainerInitializer.html">SeContainerInitializer</a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To use the <code>initialize()</code> method, you should first create a <code>newInstance()</code> if the <code>SeContainerInitializer</code>.</p>
</div>
</li>
<li>
<p>To make sure the project is compiling, you can run <code>mvn clean install</code> without errors.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you try to run the <code>main</code> method in the class <code>App1</code> you will get a RuntimeException, <code>NullPointerException</code> because there is still code that needs to be initialized correctly.</p>
<p>Also, if your project was generated with microprofile starter or helidon maven archetype, you might get an <code>IllegalStateException</code> if you try to run the <code>main</code> method. That is due to the <code>io.helidon.microprofile.cdi</code> implementation that is being used. If you use it instead of weld, in order to be able to execute the main method, you need to add the property configuration <code>mp.initializer.allow=true</code> to your <code>microprofile-config.properties</code>.</p>
</div>
</li>
</ol>
<h4 id="obtaining-existing-object-instances-in-the-secontainer"><span class="enumerate-headings-plugin enumerate-heading-plugin">3.3.2.2</span> Obtaining existing object instances in the SeContainer</h4>
<ol>
<li>In the class <code>App1</code>, locate the object car initialization on line 23. </li>
</ol>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="w">    </span><span class="n">Car</span><span class="w"> </span><span class="n">car</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w"></span>
<a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">    </span><span class="n">car</span><span class="p">.</span><span class="na">move</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<ol>
<li>
<p>An object car may already exist in the container. If so, there is no need to create a new instance of this class. Use the container to obtain the existing car instance (if existing). The great thing about the CDI API is that by default, if no object instance is located in memory, it creates a new instance and retrieves it.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Check how the Vehicle is being obtained from the container. Be sure to obtain an instance of the <code>Car</code> class, and not the interface <code>Vehicle</code>.</p>
</div>
</li>
<li>
<p>Make sure the project is compiling, run <code>mvn clean install</code> without errors.</p>
</li>
</ol>
<h4 id="testing-your-code"><span class="enumerate-headings-plugin enumerate-heading-plugin">3.3.2.3</span> <strong>Testing your code:</strong></h4>
<ol>
<li>Now, execute the main method of the class <code>App1</code>. </li>
<li>
<p>Confirm you see a message output in the logs like: <em>"Is the same vehicle? true"</em></p>
<div class="admonition question">
<p class="admonition-title">In this code, we use CDI to obtain an instance of a Vehicle and then, of a Car. Why does the CDI API return the same object?</p>
</div>
</li>
<li>
<p>Checking the <strong>CDI Scope</strong></p>
</li>
<li>
<p>Open the class <code>Car</code>.</p>
</li>
<li>
<p>Locate the declaration of this bean's scope, on line 8:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="nd">@ApplicationScoped</span><span class="w"></span>
<a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Car</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Vehicle</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
</li>
<li>
<p>Comment the annotation <code>@ApplicationScoped</code> and save the file. The class should look like:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="c1">// @ApplicationScoped</span><span class="w"></span>
<a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Car</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Vehicle</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
</li>
<li>
<p>Now, run your code again and check the output. </p>
<div class="admonition question">
<p class="admonition-title">Did you get a different output message? Why changing the scope of the Car bean changed the behavior of our code?</p>
</div>
</li>
</ol>
<h3 id="producers-and-consumers"><span class="enumerate-headings-plugin enumerate-heading-plugin">3.3.3</span> Producers and Consumers</h3>
<p>When working with Java code, we can leverage the CDI API to create classes that will behave and producers and consumers. In other words, instead of invoking a behavior of a specific class, we can instead create decoupled code that reacts to specific events in the container. Let's see this in action by trying out the news example demonstrated by the instructor.</p>
<ol>
<li>
<p>Open the project <code>cdi-lab</code> in your IDE of choice if you still haven't. In this project we have the package <code>my.compary.cdi.lab.news</code> with the classes:</p>
<ul>
<li><code>Journalist</code>  class that is a <strong>producer</strong> responsible for notifying the news to every consumer in the project;</li>
<li>There are three <strong>consumers</strong> in this project:  <code>Magazine</code>, <code>Newspaper</code>, and <code>SocialMedia</code> .</li>
</ul>
</li>
<li>
<p>Open the <code>Journalist.java</code> class, and:</p>
<ol>
<li>
<p>Analyse the different CDI annotations, like <code>@ApplicationScoped</code> and <code>@Inject</code>.</p>
<div class="admonition question">
<p class="admonition-title">What is this "Event" class and what can you use it for?</p>
</div>
</li>
<li>
<p>On the line 14, inside the method <code>receiveNews</code> , fire <strong>events</strong> containing the news, using the injected object <code>event</code>.</p>
</li>
</ol>
</li>
<li>
<p>Open the <code>Magazine</code>, <code>Newspaper</code>, and <code>SocialMedia</code> classes.</p>
<ol>
<li>Notice it implements the interface <code>java.util.function.Consumer</code>. </li>
<li>
<p>Fix the method <code>accept</code>, by making it react to events that were fired in this application scope. </p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You may want to use the anotation <code>@javax.enterprise.event.Observes</code>;</p>
</div>
</li>
</ol>
</li>
<li>
<p>Finally, open the class <code>App4.java</code> and analyse it.</p>
</li>
<li>
<p>Validate if you did everything right by running the main method in <code>App4</code>. You should see in a log output for each observer (three in total), containing messages like: "We got the news, we'll publish it on Social Media: Java 17 has arrived!!".</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>INFO: WELD-ENV-002003: Weld SE container 724cb2e4-edb7-4de5-8b0f-df2adc814bb3 initialized
<a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>Oct <span class="m">10</span>, <span class="m">2021</span> <span class="m">8</span>:52:36 PM my.compary.cdi.lab.news.SocialMedia accept
<a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>INFO: We got the news, we<span class="s1">'ll publish it on Social Media: Java 17 has arrived!!</span>
<a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="s1">Oct 10, 2021 8:52:36 PM my.compary.cdi.lab.news.NewsPaper accept</span>
<a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="s1">INFO: We got the news, we'</span>ll publish it on a newspaper: Java <span class="m">17</span> has arrived!!
<a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>Oct <span class="m">10</span>, <span class="m">2021</span> <span class="m">8</span>:52:36 PM my.compary.cdi.lab.news.Magazine accept
<a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>INFO: We got the news, we<span class="err">'</span>ll publish it on a magazine: Java <span class="m">17</span> has arrived!!
<a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>Oct <span class="m">10</span>, <span class="m">2021</span> <span class="m">8</span>:52:36 PM org.jboss.weld.environment.se.WeldContainer shutdown
<a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>INFO: WELD-ENV-002001: Weld SE container 724cb2e4-edb7-4de5-8b0f-df2adc814bb3 shut down
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Why these messages were logged, if we never invoked the method <code>accept</code> in those classes (e.g. <code>magazine.accept(news)</code>)?</p>
</div>
</li>
</ol>
<div class="admonition success">
<p class="admonition-title">Congratulations</p>
<p>You've successfully completed the CDI exercise.There are several ways to use CDI in Java applications. In these exercises you could practice some of the features that can be leverage in application where you can use CDI.</p>
<p>You also configured and used the specification through Weld, the reference implementation of the specification, but there are several others where each vendor provides their own implementation of the CDI spec.</p>
</div>
<hr/>
<div class="md-source-file">
<small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2022-06-28</span>
</small>
</div>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            Back to top
          </a>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Getting started with Helidon" class="md-footer__link md-footer__link--prev" href="../01_helidon_getting_started/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Getting started with Helidon
            </div>
</div>
</a>
<a aria-label="Next: Creating a client service with MicroProfile RestClient" class="md-footer__link md-footer__link--next" href="../03_rest_client_lab/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Creating a client service with MicroProfile RestClient
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Developed with ü§ç ¬† by Architects4j
    </div>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.prune", "toc.follow", "navigation.top"], "search": "../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.0238f547.min.js"></script>
</body>
</html>